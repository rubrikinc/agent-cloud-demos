# =============================================================================
# LLM Provider Configuration
# =============================================================================
# Choose which LLM provider to use: "openai" or "anthropic"
# Default: "openai" (if not specified)
LLM_PROVIDER="openai"

# =============================================================================
# OpenAI API Configuration
# =============================================================================
# These settings configure the connection to OpenAI's API for LLM operations
# Required when LLM_PROVIDER="openai"

# OpenAI API key for authentication
# Find this in your OpenAI account dashboard under API keys
OPENAI_API_KEY="<your-openai-api-key>"

# OpenAI API endpoint URL
# Format: https://api.openai.com/v1 (or your OpenAI-compatible endpoint)
OPENAI_ENDPOINT="<your-openai-endpoint>"

# OpenAI model name to use for chat completions
# Common options: "gpt-4o", "gpt-4-turbo", "gpt-4", "gpt-3.5-turbo"
OPENAI_MODEL="gpt-4o"

# =============================================================================
# Anthropic API Configuration
# =============================================================================
# These settings configure the connection to Anthropic's API for LLM operations
# Required when LLM_PROVIDER="anthropic"

# Anthropic API key for authentication
# Find this in your Anthropic account dashboard under API keys
# ANTHROPIC_API_KEY="<your-anthropic-api-key>"

# Anthropic model name to use for chat completions
# Common options: "claude-3-7-sonnet-20250219", "claude-3-5-sonnet-20241022", "claude-3-opus-20240229"
# ANTHROPIC_MODEL="claude-3-7-sonnet-20250219"

# Anthropic API endpoint URL (optional)
# Default: https://api.anthropic.com (if not specified)
# ANTHROPIC_ENDPOINT="https://api.anthropic.com"

# # =============================================================================
# # Application Configuration
# # =============================================================================

# # User agent string for web scraping operations
# # Used by WebBaseLoader when fetching documents from URLs
# USER_AGENT="WebBaseLoader"

# # Name of the SQL Server table that stores the vector embeddings
# # This table will be created/used for storing document embeddings
# TABLE_NAME="lilian_weng_blog_posts"

# =============================================================================
# SQL Server Connection Configuration
# =============================================================================
# Choose ONE of the following connection string formats based on your setup:

# -----------------------------------------------------------------------------
# Option 1: Local/On-Premises SQL Server with SQL Authentication
# -----------------------------------------------------------------------------
# Use this format for SQL Server with username/password authentication
# Replace:
#   <server> - Your SQL Server hostname or IP address (e.g., localhost, 10.0.0.1)
#   <database-name> - Your database name
#   <username> - SQL Server username
#   <password> - SQL Server password
MSSQL_CONNECTION_STRING='Driver={ODBC Driver 18 for SQL Server};Server=<server>;Database=<database-name>;Connection Timeout=30;TrustServerCertificate=yes;LongAsMax=yes;UID=<username>;PWD=<password>;'

# -----------------------------------------------------------------------------
# Option 2: Local/On-Premises SQL Server with Windows Authentication
# -----------------------------------------------------------------------------
# Use this format for SQL Server with Windows/Integrated Authentication
# Uncomment and replace:
#   <server> - Your SQL Server hostname or IP address
#   <database-name> - Your database name
# MSSQL_CONNECTION_STRING='Driver={ODBC Driver 18 for SQL Server};Server=<server>;Database=<database-name>;Connection Timeout=30;TrustServerCertificate=yes;LongAsMax=yes;Trusted_Connection=yes;'

# -----------------------------------------------------------------------------
# Option 3: Azure SQL Database with Entra ID (Azure Active Directory) Authentication
# -----------------------------------------------------------------------------
# Use this format for Azure SQL with managed identity or Entra ID authentication
# Uncomment and replace:
#   <your-server-name> - Your Azure SQL server name (without .database.windows.net)
#   <database-name> - Your Azure SQL database name
# MSSQL_CONNECTION_STRING='Driver={ODBC Driver 18 for SQL Server};Server=<your-server-name>.database.windows.net;Database=<database-name>;Connection Timeout=60;LongAsMax=yes;Authentication=ActiveDirectoryIntegrated;'

# =============================================================================
# MCP Server Database Configuration (for customer_support_agent.py)
# =============================================================================
# The MCP server uses a THREE-TIER PRIORITY SYSTEM for authentication.
# It checks these options IN ORDER and uses the FIRST one it finds:
#
#   Priority 1: MSSQL_CONNECTION_STRING (ODBC format) ← RECOMMENDED
#   Priority 2: SQL_USER + SQL_PASSWORD (individual variables)
#   Priority 3: Azure AD Interactive Browser Authentication (fallback)
#
# ⚠️  IMPORTANT: If MSSQL_CONNECTION_STRING is set (Priority 1), the MCP server
#     will IGNORE SERVER_NAME, DATABASE_NAME, CONNECTION_TIMEOUT, and
#     TRUST_SERVER_CERTIFICATE because all settings come from the ODBC string.
#
# -----------------------------------------------------------------------------
# Priority 1: ODBC Connection String (RECOMMENDED - Currently Active)
# -----------------------------------------------------------------------------
# ✅ When MSSQL_CONNECTION_STRING is set:
#    - MCP server uses ONLY the ODBC connection string
#    - SERVER_NAME, DATABASE_NAME, CONNECTION_TIMEOUT, TRUST_SERVER_CERTIFICATE are IGNORED
#    - All connection settings come from the ODBC string itself
#    - READONLY still works (always respected)
#
# This is the RECOMMENDED approach because:
#    - All connection settings in one place
#    - Consistent with Python's pyodbc usage
#    - Supports all ODBC driver features
#
# If you're using MSSQL_CONNECTION_STRING above, you can SKIP the variables below
# (they won't be used by the MCP server)

# -----------------------------------------------------------------------------
# Priority 2: SQL Server Authentication (Individual Variables)
# -----------------------------------------------------------------------------
# ✅ When MSSQL_CONNECTION_STRING is NOT set, but SQL_USER and SQL_PASSWORD ARE set:
#    - MCP server uses these individual variables
#    - SERVER_NAME, DATABASE_NAME, CONNECTION_TIMEOUT, TRUST_SERVER_CERTIFICATE are USED
#    - READONLY is USED
#
# To use this method:
#    1. Comment out or remove MSSQL_CONNECTION_STRING above
#    2. Uncomment and set the variables below
#
# SQL_USER=<your-sql-username>
# SQL_PASSWORD=<your-sql-password>
# SERVER_NAME=<your-server>.database.windows.net
# DATABASE_NAME=<your-database-name>
# CONNECTION_TIMEOUT=30               # Connection timeout in seconds
# TRUST_SERVER_CERTIFICATE=false      # Set to "true" to trust self-signed certs

# -----------------------------------------------------------------------------
# Priority 3: Azure AD Authentication (Fallback)
# -----------------------------------------------------------------------------
# ✅ When NEITHER MSSQL_CONNECTION_STRING NOR SQL_USER/SQL_PASSWORD are set:
#    - MCP server uses Azure AD Interactive Browser Authentication
#    - SERVER_NAME, DATABASE_NAME, CONNECTION_TIMEOUT, TRUST_SERVER_CERTIFICATE are USED
#    - READONLY is USED
#    - Requires interactive browser login when MCP server starts
#    - User must have Azure AD permissions to access the database
#
# To use this method:
#    1. Comment out or remove MSSQL_CONNECTION_STRING above
#    2. Leave SQL_USER and SQL_PASSWORD commented out
#    3. Uncomment and set the variables below
#
# SERVER_NAME=<your-server>.database.windows.net
# DATABASE_NAME=<your-database-name>
# CONNECTION_TIMEOUT=30               # Connection timeout in seconds
# TRUST_SERVER_CERTIFICATE=false      # Set to "true" to trust self-signed certs

# -----------------------------------------------------------------------------
# Global MCP Server Settings (Always Respected)
# -----------------------------------------------------------------------------
# These settings work regardless of which authentication method you use:

# READONLY mode - controls which tools are available to the agent
# - false: All tools available (read_data, insert_data, update_data, create_table, etc.)
# - true: Only read-only tools available (read_data, list_table, describe_table)
READONLY=false

# =============================================================================
# Notes:
# =============================================================================
# 1. Copy this file to .env (e.g., cp .env.template .env)
# 2. Replace all placeholder values with your actual configuration
# 3. Never commit files containing actual secrets to version control
# 4. For customer support agent: python customer_support_agent.py
# 5. Ensure ODBC Driver 18 for SQL Server is installed on your system
# 6. For Azure SQL, you may need to configure firewall rules and authentication
# 7. Test MCP configuration with: python test_mcp_integration.py
# 8. See MCP_DATABASE_CONFIGURATION.md for detailed configuration guide
#
# =============================================================================
# Quick Reference: Which Variables Are Used?
# =============================================================================
#
# IF you have MSSQL_CONNECTION_STRING set (Priority 1 - RECOMMENDED):
#   ✅ MSSQL_CONNECTION_STRING - Used for all connection settings
#   ✅ READONLY - Used to control available tools
#   ❌ SERVER_NAME - Ignored (comes from ODBC string)
#   ❌ DATABASE_NAME - Ignored (comes from ODBC string)
#   ❌ SQL_USER - Ignored (comes from ODBC string)
#   ❌ SQL_PASSWORD - Ignored (comes from ODBC string)
#   ❌ CONNECTION_TIMEOUT - Ignored (comes from ODBC string)
#   ❌ TRUST_SERVER_CERTIFICATE - Ignored (comes from ODBC string)
#
# IF you DON'T have MSSQL_CONNECTION_STRING, but DO have SQL_USER + SQL_PASSWORD (Priority 2):
#   ✅ SERVER_NAME - Used
#   ✅ DATABASE_NAME - Used
#   ✅ SQL_USER - Used
#   ✅ SQL_PASSWORD - Used
#   ✅ CONNECTION_TIMEOUT - Used
#   ✅ TRUST_SERVER_CERTIFICATE - Used
#   ✅ READONLY - Used
#
# IF you have NEITHER MSSQL_CONNECTION_STRING NOR SQL_USER/SQL_PASSWORD (Priority 3):
#   ✅ SERVER_NAME - Used
#   ✅ DATABASE_NAME - Used
#   ✅ CONNECTION_TIMEOUT - Used
#   ✅ TRUST_SERVER_CERTIFICATE - Used
#   ✅ READONLY - Used
#   ℹ️  Azure AD Interactive Browser Authentication will be used